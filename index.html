<!DOCTYPE html>
<html>
<head>
    <title>Math Problem Solver and AI Chat</title>
    <style>
        .message {
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: Arial, sans-serif;
        }

        .message strong {
            font-weight: bold;
        }

        .message a {
            color: #333;
            text-decoration: none;
        }

        h1, h2 {
            color: #333;
            font-family: Arial, sans-serif;
        }

        input[type="text"], button {
            padding: 8px;
            font-size: 14px;
            border-radius: 4px;
        }

        #user-expression, #user-input {
            margin-bottom: 10px;
        }

        #result-container {
            font-weight: bold;
            margin-bottom: 10px;
        }

        hr {
            margin: 20px 0;
            border: none;
            border-top: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <h1>Math Problem Solver and AI Chat</h1>
    <h2>Math Problem Solver</h2>
    <div id="problem-container"></div>
    <input type="text" id="user-expression" placeholder="수식을 입력하세요..." />
    <button onclick="evaluateExpression()">평가</button>

    <div id="result-container"></div>

    <hr>

    <h2>AI Chat</h2>
    <div id="chat-container"></div>
    <input type="text" id="user-input" placeholder="질문을 입력하세요..." />
    <button onclick="sendUserMessage()">전송</button>

    <script>
        const problemContainer = document.getElementById('problem-container');
        const userExpression = document.getElementById('user-expression');
        const resultContainer = document.getElementById('result-container');

        const chatContainer = document.getElementById('chat-container');
        const userInput = document.getElementById('user-input');

        const responses = {
            '안녕': '안녕하세요!',
            '반가워': '반가워요!',
            '안녕하세요': '반가워요!',
            '안녕하세요~': '반가워요!',
            '안녕하세요~!': '반가워요!',
            '너희 아버지는 잘계시니?': '저의 아버지는 박사헌입니다. 죽었습니다.'
        };

        function evaluateExpression() {
            const expression = userExpression.value;
            problemContainer.textContent = expression;

            try {
                const result = Function(`return ${expression}`)();
                resultContainer.textContent = `결과: ${result}`;
            } catch (error) {
                resultContainer.textContent = '유효하지 않은 수식입니다.';
            }
        }

        function searchOnNaver(query) {
            const searchUrl = `https://search.naver.com/search.naver?query=${encodeURIComponent(query)}`;
            window.open(searchUrl, '_blank');
        }

        function searchAndDisplayResult(query) {
            const searchUrl = `https://search.naver.com/search.naver?query=${encodeURIComponent(query)}`;
            const message = `<div class="message">ChatGPT조밥: 네이버에서 "<a href="${searchUrl}" target="_blank">${query}</a>"에 대한 검색 결과를 찾았습니다.</div>`;
            displayMessage(message);
        }

        function sendUserMessage() {
            const message = userInput.value;
            displayMessage(`<div class="message">User: ${message}</div>`);
            userInput.value = '';

            let answer = '아직 완전판이 아니라 그런거 ㅁ?ㄹ.';
            if (message.startsWith('/검색 ')) {
                const query = message.replace('/검색 ', '');
                searchAndDisplayResult(query);
                return;
            }
            for (const question in responses) {
                if (message.includes(question)) {
                    answer = responses[question];
                    break;
                }
            }
            displayMessage(`<div class="message">ChatGPT조밥: ${answer}</div>`);
        }

        function displayMessage(content) {
            const messageElement = document.createElement('div');
            messageElement.innerHTML = content;
            chatContainer.appendChild(messageElement);
        }
    </script>
</body>
</html>